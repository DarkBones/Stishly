<%= render partial: "schedules/transaction", collection: transactions %>

<div class="card" id="new_transaction_card">

  <div class="card-header" id="headingnewtransaction">
    <a class="btn btn-link collapsed col-12 clickable" data-toggle="collapse" data-target="#collapsenewtransaction" aria-expanded="true" aria-controls="collapsenewtransaction" id="new-scheduled-transaction" onclick="resetTransactionMenu('#new_schedule_transactionform');">
      <span class="float-left">
        New Transaction
      </span>
    </a>
  </div>

  <div id="collapsenewtransaction" class="collapse card-scheduled-transaction" aria-labelledby="headingnewtransaction" data-parent="#accordion">
    <div class="card-body">
      <% transaction = Transaction.new.decorate %>
      <%= form_with(model: transaction, :html => { :id => "new_schedule_transactionform" }, url: create_scheduled_transaction_path(schedule_id)) do |f| %>

        <%= render partial: "transactions/transaction_form_fields", :locals => {:transaction => transaction, :f => f, :base_only => true, :form_id_prefix => "new_schedule_", :form_id_suffix => "", :schedule_id => schedule_id } %>

        <div class="col-12 py-5">
          <%= f.button 'Create Transaction', :class => 'float-right btn btn-primary', data: {disable_with: image_tag("ajax_spinner_white.svg", height: "20") + " Creating transaction ..."} %>
        </div>
      <% end %>
    </div>

  </div>

</div>
