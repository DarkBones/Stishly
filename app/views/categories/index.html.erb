<%= content_for :meta_title, t('views.categories.index.title') %>

<div class="container">
	<div class="row">
		<div class="col-12">
			<h2>
				<%= t('views.categories.index.titledssd.main') %>
    	<button type="button" class="float-right btn btn-link" data-toggle="tooltip" data-placement="top" title="<%= t('views.categories.index.create.hint') %>" onclick="insertNewCategoryForm(); return false;"><%= t('views.categories.index.create.text') %></button>
    	</h2>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<div id="new_category_form" style="display: none;">
				<%= render partial: "categories/new_form" %>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-12">
			<%#= draw_tree(Category.get_user_categories(current_user, true, false, false), ul_class: "sortable-nested", include_sort_handle: true) %> 
			<%= draw_sortable_list(Category.get_user_categories(current_user, true, false, false)) %>
		</div>
	</div>
</div>

<script>
	function insertNewCategoryForm() {
		if ($("#new_category_form").is(":hidden")) {
			$("#new_category_form").show();
		}
	}
	
	<%= render partial: "categories/delete_category.js" %>
</script>
